{% load static i18n %}

<!DOCTYPE html>
{% get_current_language as LANGUAGE_CODE %}
<html lang="{{ LANGUAGE_CODE }}">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Hotel rooms trade app" />
    <meta name="author" content="Vicent LluÃ­s Tortosa Bataller" />
    <title>
      {% block title %}
        StayTrade
      {% endblock title %}
    </title>
    <!-- Favicon -->
    <link rel="icon" href="{% static 'images/favicons/favicon.ico' %}" />
    {% block css %}
      <!-- Bootstrap CSS -->
      <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/css/bootstrap.min.css"
            integrity="sha512-SbiR/eusphKoMVVXysTKG/7VseWii+Y3FdHrt0EpKgpToZeemhqHeZeLWLhJutz/2ut2Vw1uQEj2MbRF+TVBUA=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer" />
      <!-- HTMX -->
      <script src="https://unpkg.com/htmx.org@1.9.10"></script>
      <!-- Estilos personalizados -->
      <link rel="stylesheet" href="{% static 'css/main.css' %}" />
      <link rel="stylesheet" href="{% static 'css/sidebar.css' %}" />
      <link rel="stylesheet" href="{% static 'css/components.css' %}" />
    {% endblock css %}
    {% block javascript %}
      <!-- Bootstrap JS -->
      <script defer
              src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/js/bootstrap.min.js"
              integrity="sha512-1/RvZTcCDEUjY/CypiMz+iqqtaoQfAITmNSJY17Myp4Ms5mdxPS5UV7iOfdZoxcGhzFbOm6sntTKJppjvuhg4g=="
              crossorigin="anonymous"
              referrerpolicy="no-referrer"></script>
      <script defer src="{% static 'js/main.js' %}"></script>
    {% endblock javascript %}
  </head>
  <body>
    <div class="app-container">
      {% if request.user.is_authenticated %}
        <!-- Barra lateral -->
        <aside class="sidebar">
          <div class="sidebar-header">
            <h2>StayTrade</h2>
          </div>
          <nav class="sidebar-menu">
            <ul>
              <li class="sidebar-menu-item">
                <a href="{% url 'home' %}" class="sidebar-menu-link">{% translate "Home" %}</a>
              </li>
              {% if request.user.is_provider %}
                <li class="sidebar-menu-item">
                  <a href="{% url 'hotels:list' %}" class="sidebar-menu-link">{% translate "My Hotels" %}</a>
                </li>
              {% endif %}
              <li class="sidebar-menu-item">
                <a href="{% url 'users:detail' request.user.username %}"
                   class="sidebar-menu-link">{% translate "My Profile" %}</a>
              </li>
            </ul>
          </nav>
        </aside>
      {% endif %}
      <div class="main-content">
        <!-- Header -->
        <header class="main-header">
          <nav class="navbar navbar-expand-lg">
            <div class="container-fluid">
              {% if not request.user.is_authenticated %}
                <a class="navbar-brand" href="{% url 'home' %}">StayTrade</a>
              {% endif %}
              <div class="ms-auto">
                {% if request.user.is_authenticated %}
                  <a href="{% url 'account_logout' %}" class="btn btn-outline-primary">{% translate "Sign Out" %}</a>
                {% else %}
                  <div class="d-flex gap-2">
                    {% if ACCOUNT_ALLOW_REGISTRATION %}
                      <a href="{% url 'account_signup' %}" class="btn btn-outline-primary">{% translate "Sign Up" %}</a>
                    {% endif %}
                    <a href="{% url 'account_login' %}" class="btn btn-primary">{% translate "Sign In" %}</a>
                  </div>
                {% endif %}
              </div>
            </div>
          </nav>
        </header>
        <!-- Mensajes -->
        {% if messages %}
          <div class="messages-container">
            {% for message in messages %}
              <div class="alert alert-dismissible {% if message.tags %}alert-{{ message.tags }}{% endif %}">
                {{ message }}
                <button type="button"
                        class="btn-close"
                        data-bs-dismiss="alert"
                        aria-label="Close"></button>
              </div>
            {% endfor %}
          </div>
        {% endif %}
        <!-- Contenido principal -->
        <main class="content">
          {% block content %}
          {% endblock content %}
        </main>
        <!-- Footer -->
        <footer class="main-footer">
          <div class="container">
            <p>copy; {% now "Y" %} StayTrade. {% translate "All rights reserved" %}.</p>
          </div>
        </footer>
      </div>
    </div>
    {% block modal %}
    {% endblock modal %}
    {% block inline_javascript %}
    {% endblock inline_javascript %}
  </body>
</html>
